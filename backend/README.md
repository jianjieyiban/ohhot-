# ä¸‰çŸ³æ‹›è˜ - åç«¯æœåŠ¡

ä¸“ä¸šçš„æ‹›è˜å¹³å°åç«¯ API æœåŠ¡ï¼ŒåŸºäº Node.js + Express æ„å»ºã€‚

## è”ç³»æˆ‘ä»¬

- ğŸ“§ é‚®ç®±ï¼š1323432580@qq.com
- ğŸ“± æ‰‹æœºï¼š15608476465
- ğŸ’¬ å¾®ä¿¡å…¬ä¼—å·ï¼šå—å²³è¡¡å±±ä¸‡äº‹é€š
- â° å·¥ä½œæ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨äº” 9:00-18:00

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ” **ç”¨æˆ·è®¤è¯** - JWT Token è®¤è¯ã€æƒé™ç®¡ç†
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·æ³¨å†Œã€ä¸ªäººä¿¡æ¯ã€è§’è‰²ç®¡ç†
- ğŸ’¼ **èŒä½ç®¡ç†** - èŒä½å‘å¸ƒã€ç¼–è¾‘ã€æœç´¢ã€ç­›é€‰
- ğŸ“ **ç”³è¯·ç®¡ç†** - èŒä½ç”³è¯·ã€ç”³è¯·çŠ¶æ€è·Ÿè¸ª
- ğŸ¢ **ä¼ä¸šç®¡ç†** - ä¼ä¸šè®¤è¯ã€èŒä½ç®¡ç†
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - å¹³å°æ•°æ®ç»Ÿè®¡å’Œåˆ†æ

### æŠ€æœ¯ç‰¹æ€§
- ğŸš€ **é«˜æ€§èƒ½** - åŸºäº Express çš„å¿«é€Ÿ API æœåŠ¡
- ğŸ”’ **å®‰å…¨æ€§** - JWT è®¤è¯ã€è¾“å…¥éªŒè¯ã€SQL æ³¨å…¥é˜²æŠ¤
- ğŸ“ˆ **å¯æ‰©å±•** - æ¨¡å—åŒ–æ¶æ„ã€æ˜“äºæ‰©å±•
- ğŸ“‹ **æ–‡æ¡£åŒ–** - Swagger API æ–‡æ¡£
- ğŸ§ª **æµ‹è¯•è¦†ç›–** - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- ğŸ³ **å®¹å™¨åŒ–** - Docker æ”¯æŒ

## æŠ€æœ¯æ ˆ

### åç«¯æ¡†æ¶
- **Node.js** - JavaScript è¿è¡Œæ—¶
- **Express.js** - Web åº”ç”¨æ¡†æ¶
- **MySQL** - å…³ç³»å‹æ•°æ®åº“
- **Redis** - ç¼“å­˜å’Œä¼šè¯å­˜å‚¨

### å¼€å‘å·¥å…·
- **JWT** - JSON Web Token è®¤è¯
- **bcrypt** - å¯†ç åŠ å¯†
- **Multer** - æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **Nodemailer** - é‚®ä»¶å‘é€
- **Winston** - æ—¥å¿—è®°å½•

### æµ‹è¯•å·¥å…·
- **Jest** - æµ‹è¯•æ¡†æ¶
- **Supertest** - HTTP æµ‹è¯•

## é¡¹ç›®ç»“æ„

```
my-server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/         # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth.js         # è®¤è¯æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ users.js        # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ jobs.js         # èŒä½æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ applications.js # ç”³è¯·æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ companies.js    # ä¼ä¸šæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹å±‚
â”‚   â”‚   â”œâ”€â”€ User.js         # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Job.js          # èŒä½æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Application.js  # ç”³è¯·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Company.js      # ä¼ä¸šæ¨¡å‹
â”‚   â”‚   â””â”€â”€ City.js         # åŸå¸‚æ¨¡å‹
â”‚   â”œâ”€â”€ routes/             # è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ auth.js         # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ users.js        # ç”¨æˆ·è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ jobs.js         # èŒä½è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ applications.js # ç”³è¯·è·¯ç”±
â”‚   â”‚   â””â”€â”€ companies.js    # ä¼ä¸šè·¯ç”±
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js         # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ validation.js   # éªŒè¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ errorHandler.js # é”™è¯¯å¤„ç†
â”‚   â”‚   â””â”€â”€ rateLimit.js    # é™æµä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ database.js     # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ jwt.js          # JWT å·¥å…·
â”‚   â”‚   â”œâ”€â”€ email.js        # é‚®ä»¶å·¥å…·
â”‚   â”‚   â”œâ”€â”€ upload.js       # æ–‡ä»¶ä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ logger.js       # æ—¥å¿—å·¥å…·
â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database.js     # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ jwt.js          # JWT é…ç½®
â”‚   â”‚   â””â”€â”€ server.js       # æœåŠ¡å™¨é…ç½®
â”‚   â””â”€â”€ app.js              # åº”ç”¨å…¥å£
â”œâ”€â”€ tests/                  # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ uploads/                # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”œâ”€â”€ package.json            # ä¾èµ–é…ç½®
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- MySQL >= 8.0
- Redis >= 6.0ï¼ˆå¯é€‰ï¼‰

### å®‰è£…ä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-server

# ä½¿ç”¨ npm
npm install

# ä½¿ç”¨ yarn
yarn install

# ä½¿ç”¨ pnpm
pnpm install
```

### ç¯å¢ƒé…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
```bash
cp .env.example .env
```

2. ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„é…ç½®ï¼š
```env
PORT=5000
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=sanshi_recruit
JWT_SECRET=your_super_secret_jwt_key_here
```

3. åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE lw CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start

# ä½¿ç”¨ yarn
yarn dev
```

æœåŠ¡å°†åœ¨ http://localhost:5000 å¯åŠ¨ã€‚

## API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åï¼Œè®¿é—® http://localhost:5000/api-docs æŸ¥çœ‹ Swagger API æ–‡æ¡£ã€‚

### ä¸»è¦ API ç«¯ç‚¹

#### è®¤è¯ç›¸å…³
- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/refresh` - åˆ·æ–° Token
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º

#### ç”¨æˆ·ç›¸å…³
- `GET /api/users/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/profile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `GET /api/users/applications` - è·å–ç”³è¯·è®°å½•

#### èŒä½ç›¸å…³
- `GET /api/jobs` - è·å–èŒä½åˆ—è¡¨
- `GET /api/jobs/:id` - è·å–èŒä½è¯¦æƒ…
- `POST /api/jobs` - åˆ›å»ºèŒä½ï¼ˆä¼ä¸šç”¨æˆ·ï¼‰
- `PUT /api/jobs/:id` - æ›´æ–°èŒä½ï¼ˆä¼ä¸šç”¨æˆ·ï¼‰
- `DELETE /api/jobs/:id` - åˆ é™¤èŒä½ï¼ˆä¼ä¸šç”¨æˆ·ï¼‰

#### ç”³è¯·ç›¸å…³
- `POST /api/applications` - ç”³è¯·èŒä½
- `GET /api/applications/:id` - è·å–ç”³è¯·è¯¦æƒ…
- `PUT /api/applications/:id` - æ›´æ–°ç”³è¯·çŠ¶æ€

## æ•°æ®åº“è®¾è®¡

### ä¸»è¦æ•°æ®è¡¨

#### users è¡¨
- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- è®¤è¯ä¿¡æ¯
- è§’è‰²æƒé™

#### jobs è¡¨
- èŒä½ä¿¡æ¯
- ä¼ä¸šä¿¡æ¯
- è–ªèµ„å¾…é‡

#### applications è¡¨
- ç”³è¯·è®°å½•
- ç”³è¯·çŠ¶æ€
- æ—¶é—´æˆ³

#### companies è¡¨
- ä¼ä¸šä¿¡æ¯
- è®¤è¯çŠ¶æ€
- è”ç³»æ–¹å¼

#### cities è¡¨
- åŸå¸‚æ•°æ®
- åŒºåŸŸä¿¡æ¯

## éƒ¨ç½²æŒ‡å—

### ä¼ ç»Ÿéƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

2. **å¯åŠ¨æœåŠ¡**
```bash
npm start
```

### Docker éƒ¨ç½²

1. **æ„å»ºé•œåƒ**
```bash
docker build -t sanshi-recruit-server .
```

2. **è¿è¡Œå®¹å™¨**
```bash
docker run -p 5000:5000 sanshi-recruit-server
```

### PM2 éƒ¨ç½²

1. **å®‰è£… PM2**
```bash
npm install -g pm2
```

2. **å¯åŠ¨åº”ç”¨**
```bash
pm2 start ecosystem.config.js
```

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- tests/auth.test.js
```

### æµ‹è¯•è¦†ç›–ç‡

é¡¹ç›®åŒ…å«å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§ã€‚

## ç›‘æ§å’Œæ—¥å¿—

### æ—¥å¿—é…ç½®

- å¼€å‘ç¯å¢ƒï¼šæ§åˆ¶å°è¾“å‡º
- ç”Ÿäº§ç¯å¢ƒï¼šæ–‡ä»¶æ—¥å¿— + æ§åˆ¶å°
- æ”¯æŒæ—¥å¿—åˆ†çº§ï¼šerrorã€warnã€infoã€debug

### å¥åº·æ£€æŸ¥

è®¿é—® `/health` ç«¯ç‚¹è·å–æœåŠ¡å¥åº·çŠ¶æ€ï¼š

```bash
curl http://localhost:5000/health
```

## å®‰å…¨è€ƒè™‘

### å·²å®ç°çš„å®‰å…¨æªæ–½

- JWT Token è®¤è¯
- å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆbcryptï¼‰
- SQL æ³¨å…¥é˜²æŠ¤
- XSS æ”»å‡»é˜²æŠ¤
- CSRF ä¿æŠ¤
- è¯·æ±‚é¢‘ç‡é™åˆ¶
- è¾“å…¥æ•°æ®éªŒè¯

### å»ºè®®çš„å®‰å…¨å®è·µ

- å®šæœŸæ›´æ–°ä¾èµ–
- ä½¿ç”¨ HTTPS
- é…ç½®é˜²ç«å¢™
- ç›‘æ§å¼‚å¸¸è¯·æ±‚
- å®šæœŸå®‰å…¨å®¡è®¡

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª JavaScript Standard Style
- ä½¿ç”¨ ESLint æ£€æŸ¥ä»£ç 
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Š
- æ·»åŠ é€‚å½“çš„æµ‹è¯•ç”¨ä¾‹

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [https://github.com/jianjieyiban/sanshi-recruit-edgeone](https://github.com/jianjieyiban/sanshi-recruit-edgeone)
- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/jianjieyiban/sanshi-recruit-edgeone/issues)
- é‚®ç®±: tech@sanshi.com

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸ‰ åŸºç¡€ API åŠŸèƒ½å®ç°
- ğŸ” JWT è®¤è¯ç³»ç»Ÿ
- ğŸ“Š æ•°æ®åº“è®¾è®¡å’Œè¿ç§»
- ğŸ§ª æµ‹è¯•æ¡†æ¶æ­å»º